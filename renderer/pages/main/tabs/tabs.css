/* --- 标签栏样式 --- */
#tabs-bar {
    display: flex;
    align-items: flex-end; /* Align to bottom for better look */
    background-color: var(--app-bg-color);
    padding: 5px 140px 0 5px; /* Right padding reserves space for window controls */
    flex-shrink: 0;
}

#tabs-container {
    flex-shrink: 1;
    display: flex;
    overflow-x: auto;
    overflow-y: hidden; /* Prevent vertical scrollbar */
    -webkit-app-region: no-drag; /* Exclude scrollable area from drag */
    /* Hide scrollbar by default, will be styled below */
    scrollbar-width: none; /* For Firefox */
}

#tabs-container::-webkit-scrollbar {
    height: 4px; /* Set height of the scrollbar */
}

#tabs-container::-webkit-scrollbar-track {
    background: transparent; /* Make the track invisible */
}

#tabs-container::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb-color); /* Color of the scroll thumb */
    border-radius: 2px;
}

#tabs-container::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover-color); /* 鼠标悬停在滚动条滑块上时的颜色 */
}

.tab-item {
    display: flex;
    align-items: center; /* Vertically align icon/spinner and title */
    padding: 6px 10px;
    border: 0;
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    background-color: var(--tab-bg-color);
    margin-left: -1px;
    position: relative;
    cursor: default;
    flex-shrink: 1;   /* Allow tabs to shrink */
    min-width: 80px; /* But not too much */
    max-width: 180px; /* And not too large */
    width: 180px;     /* Default width */
    box-sizing: border-box; /* Ensure padding is included in the width */
    -webkit-app-region: no-drag; /* Tabs are clickable */
    transition: background-color 0.2s ease-in-out, width 0.15s ease-in-out; /* Add smooth transition */
}

.tab-item:first-child {
    margin-left: 0;
}

.tab-item:not(.active):hover {
    background-color: var(--tab-hover-bg-color); /* Use the new theme variable */
}

.tab-item:not(.active):not(:hover) + .tab-item:not(.active):not(:hover)::before {
    content: '';
    position: absolute;
    left: -1px;
    top: 8px;
    bottom: 8px;
    width: 1px;
    background-color: var(--border-color-primary);
}

.tab-item.loading .tab-icon {
    display: none;
}

.tab-item.loading .loading-spinner {
    display: block;
}

.tab-item.active {
    background-color: var(--tab-bg-color-active);
    z-index: 2;
}

.tab-icon-container {
    width: 16px;
    height: 16px;
    margin-right: 8px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tab-icon {
    width: 16px;
    height: 16px;
}

.tab-item.loading .tab-icon {
    display: none;
}

.tab-item .loading-spinner { /* spinner is always inside a tab-item */
    display: none; /* Default hide */
}

.tab-item.loading .loading-spinner {
    display: block;
}

.loading-spinner {
    width: 16px; /* 统一尺寸 */
    height: 16px; /* 统一尺寸 */
    border: 2px solid var(--button-primary-bg); /* 使用主题蓝色 */
    border-left-color: transparent; /* 关键：隐藏一条边来制造"缺口" */
    border-radius: 50%;
    animation: spin 0.6s linear infinite; /* 调整动画速度 */
    box-sizing: border-box; /* 确保边框包含在尺寸内 */
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.tab-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 13px;
    flex-grow: 1; /* Allow title to take up available space */
}

.close-tab {
    margin-left: auto; /* Push the close button to the far right */
    width: 18px;
    height: 18px;
    border: none;
    background: transparent;
    opacity: 0.5;
    padding: 0;
    border-radius: 50%;
    font-size: 16px; /* 放大图标 */
    font-weight: 700; /* 加粗图标 */
    display: flex; /* 使用 flex 确保完美居中 */
    align-items: center;
    justify-content: center;
}

.close-tab:hover {
    opacity: 1;
    background-color: var(--tab-close-button-hover-bg);
}

#new-tab-btn {
    width: 28px; /* Adjust width to be more like a square */
    height: 28px; /* Match the visual height of the tabs */
    font-size: 26px;
    color: var(--button-icon-color);
    margin-left: 2px;
    border: 0;
    border-radius: 4px;
    background-color: var(--tab-bg-color);
    flex-shrink: 0;
    -webkit-app-region: no-drag; /* New tab button is clickable */
    padding: 0; /* Reset padding */
    box-sizing: border-box; /* Ensure border is included */
    align-self: flex-end; /* Align to the bottom of the flex container */
    transition: background-color 0.2s ease-in-out; /* Add smooth transition */
}

#new-tab-btn:hover {
    background-color: var(--new-tab-button-hover-bg);
} 